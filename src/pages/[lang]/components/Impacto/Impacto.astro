---
import MetricCard from '@components/Impacto/MetricCard.tsx';
import MetricModal from '@components/Impacto/MetricModal.tsx';
import { IMPACT_CARDS_CONFIG } from '@data/metricsConfig';

interface CardContent {
  title: string;
  description: string;
}

interface Props {
  impacto: {
    title: string;
    subtitle: string;
    cards: {
      refi: CardContent;
      digitalAsset: CardContent;
      identity: CardContent;
      poi: CardContent;
    };
  };
}

const { impacto } = Astro.props;

const cardsData = IMPACT_CARDS_CONFIG.map(config => ({
  ...config,
  title: impacto.cards[config.id as keyof typeof impacto.cards].title,
  description:
    impacto.cards[config.id as keyof typeof impacto.cards].description,
}));
---

<section class="py-12 sm:py-16 md:py-20 lg:py-24 px-4 sm:px-6 md:px-8">
  <div class="max-w-7xl mx-auto">
    <div class="mb-8 sm:mb-10 md:mb-12">
      <h2
        class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-montserrat font-bold mb-3 sm:mb-4 md:mb-6"
      >
        {impacto.title}
      </h2>
      <p class="text-sm sm:text-base md:text-lg leading-relaxed max-w-4xl">
        {impacto.subtitle}
      </p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5 md:gap-6">
      {
        cardsData.map((card, index) => (
          <MetricCard
            client:visible
            id={card.id}
            title={card.title}
            imageSrc={card.imageSrc}
            imageSrcWebp={card.imageSrcWebp}
            imageAlt={card.imageAlt}
            index={index}
          />
        ))
      }
    </div>

    {
      cardsData.map(card => (
        <MetricModal
          client:only="react"
          id={card.id}
          title={card.title}
          description={card.description}
          imageSrc={card.imageSrc}
          imageSrcWebp={card.imageSrcWebp}
          imageAlt={card.imageAlt}
        />
      ))
    }
  </div>
</section>
